---
title: 深入理解js原型与闭包
date: 2020-10-08 11:21:32
permalink: /pages/dc7357/
categories: 
  - 前端三件套
  - javascript文章
tags: 
  - 
---

JavaScript中最难理解的包括四个部分：原型、作用域、闭包及异步，这里我们就要对原型、作用域和闭包进行深入的理解和总结。关于异步，我后面会专门再进行总结。

理解原型和作用域，会对JavaScript这门语言有更深层次的理解，更有利于理解这门语言的设计思路。

## 1. 函数与对象的关系

总结来讲：“函数是一种对象，而对象是由函数创建的。”   ---   “鸡生蛋，蛋生鸡”

通过instanceof函数可以判断，函数是一种对象：

``` js
var fn = function () { };
console.log(fn instanceof Object);  // true
```

这里表明函数是一种对象，但不能武断的讲函数是对象的一种，因为函数不像数组一样是对象的一个子集。函数与对象之间并非包含与被包含的关系。


``` js
        function Fn() {
            this.name = '王福朋';
            this.year = 1988;
        }
        var fn1 = new Fn();
```

通过上例我们可以知道，对象是可以通过函数创建的，但实际上所有的对象都是通过函数创建的。


上下文环境：可以理解为一个看不见摸不着但实实在在存在的对象，所有的变量都在其中存着。对于一个函数来讲，上下文环境是在调用时创建的，因为只有调用了函数，我才知道你这个函数到底需要什么变量，才能为你创建一个上下文环境。


作用域：除了全局作用域，就只有函数才能创建作用域（ES6新引入了块级作用域），无论调用不调用，作用域是在创建函数时就确定的，它就像是地盘，创建出来时就给你划了一块地盘。所谓作用域链，就是从内往外跨越一个个作用域寻找定义的对应变量的过程。找到即停止，否则直到跨越到全局作用域才停止。


闭包应用的两种情况：函数作为返回值、函数作为参数传递；


待续...


## 参考

[深入理解javascript原型和闭包系列](https://www.cnblogs.com/wangfupeng1988/p/4001284.html)


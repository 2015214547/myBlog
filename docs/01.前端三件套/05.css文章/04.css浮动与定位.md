---
title: css浮动与定位
date: 2020-07-28 20:32:53
permalink: /pages/fd0f91/
categories: 
  - 前端三件套
  - css文章
tags: 
  - css
---
# 1.CSS浮动与定位

CSS有三种定位机制：普通流（标准流）、浮动、定位；

## 4.1 普通流

普通流（标准流或者文档流）实际上就是一个网页内标签元素由上而下由左到右排列顺序的意思，比如块级元素独占一行，行内元素从左往右排列；按照这种大前提的布局排列之下绝不会有任何例外情况的叫做普通流布局；

## 4.2 浮动

盒子使用浮动有模式转换的问题，就是块级元素（或者行内元素）转换成行内块元素（display：inline-block）。而与直接使用模式转换相比，浮动的优点优点是：浮动可以使并列的盒子间没有空隙；

未定义宽度的盒子浮动之后，宽度由其中的内容撑起；

float的取值有三种：

| **属性值** | **描述**     |
| ---------- | ------------ |
| left       | 元素向左浮动 |
| right      | 元素向右浮动 |
| none       | 元素无浮动   |

### （1）浮动特性

（1）浮动脱离标准流，不占位置，会影响标准流。只有左右浮动；

（2）浮动首先创建包含块的概念，也就是说浮动元素总是找离他最近的父级元素对齐，但不会超过内边距的范围；

（3）浮动的元素排列位置，跟上一个元素（块级）有关系，如果上一个元素有浮动，则此浮动元素与上一元素的顶部对齐，如果上一元素是标准流（即无浮动），则此浮动元素的顶部会与上一元素的底部对齐。

（4）一个父盒子里的子盒子，如果一个子盒子浮动，那么其他子盒子都需要浮动。这样才能在一行对齐显示；

（5）块级元素和行内元素浮动之后都会具有行内块元素的特性；而行内块元素的特性是，一行可以放多个元素，可以设置宽度和高度，元素的大小完全取决于定义的大小或由其中的内容来决定；

### （2）浮动总结

浮动的主要目的就是让多个块级元素在一行内显示。

浮：加了浮动的元素盒子是漂浮起来的，漂浮在其他标准流盒子的上面；

漏：加了浮动的盒子不占位置，浮起来，他原来的位置留给了标准流的盒子；

特别注意：

1. 首先浮动的盒子必须要和标准流的父级搭配使用；
2. 浮动可以使元素显示模式具有行内块元素的特性；

### （3）清除浮动

为什么要消除浮动？

由于浮动元素不再占用原文本流的位置，所以它会对后面排版的元素产生影响，为了解决这些问题，所以就需要在该元素中清除浮动，准确的说是清除浮动造成的影响。

#### **（1）清除浮动的本质**

清除浮动主要是为了解决未定义高度的父级元素因为子集元素浮动而造成高度为0的问题；

当子盒子是标准流（即未浮动）时，父盒子虽然没有定义高度，但子元素会撑起父元素的高度；而当子盒子浮动之后，父盒子失去了标准流的支撑，高度坍缩为0，下层盒子就会顶上来；

#### **（2）清除浮动的方法**

本质上叫做闭合浮动，清除浮动就是把浮动的盒子圈在里面，让父盒子闭合出口和入口，不让他们出来影响其他元素。在CSS中，清除浮动使用的是clear属性。基本语法格式如下：

选择器 {   clear：both； }

| **属性值** | **描述**                                       |
| ---------- | ---------------------------------------------- |
| left       | 不允许左侧有浮动元素（清除左侧浮动元素的影响） |
| right      | 不允许右侧有浮动元素（清除右侧浮动元素的影响） |
| both       | 同时清除左右两侧浮动的影响；最常使用；         |

##### 触发BFC法

通过触发BFC的方式，实现清除浮动效果；语法如下：

父级选择器 {  overflow：hidden || auto  || scroll； }

优点：代码简洁；

缺点：内容增多时候容易造成不会 自动换行导致内容被隐藏掉，无法显示需要溢出的元素；

##### **额外标签法**

通过在浮动元素末尾添加一个空的标签，例如`<div style="clear:both"></div>`,其他标签也可，但属性值不能变；

优点：通俗易懂，书写方便

缺点：添加许多无意义的标签，结构化比较差（不推荐使用）

##### 使用after伪元素清除浮动

:after方式为空元素的升级版，好处就是不再添加标签了

使用方法（书写时就按照这样写）：

``` css
/*方法三：使用after伪元素清除浮动*/		
.clearFix:after {
  content: "."; /*内容为小点，尽量不要空，防止旧版本浏览器有空隙*/
  display: block; /*转换成块级元素*/
  height: 0; /*他的高度要为0，不能把父级盒子撑开了*/
  visibility: hidden; /*隐藏盒子，避免小点出现在盒子中2造成影响*/
  clear: both;
}
.clearFix {
  /*ie6/7浏览器清除浮动的方式；*/
  *zoom: 1; /**代表IE6/7浏览器能够识别的特殊符号，带有这个*的属性才能被IE6/7执行，zoom就是IE6、7清除浮动的方法*/
}
```

``` html
    <div class="father clearFix">
      <div class="son1">son1</div>
      <div class="son2">son2</div>
    </div>
```

##### 使用before和after双伪元素清除浮动

使用方法：

``` css
.clearFix:before,
.clearFix:after {
  content: ""; /*这里不输入内容*/
  display: table; /*这句话可以触发BFC，BFC可以清除浮动*/
}
.clearFix:after {
  clear: both;
}
.clearFix {
  /*ie6/7浏览器清除浮动的方式；*/
  *zoom: 1; /**代表IE6/7浏览器能够识别的特殊符号，带有这个*的属性才能被IE6/7执行，zoom就是IE6、7清除浮动的方法*/
}
```

优点：代码更简洁；

缺点：由于IE6/7不使用after，所以还是需要zoom：1来触发haslyout;

## **4.3 定位**

元素的定位属性主要包括定位模式和边偏移；定位模式+边偏移=完整定位；

### （1）定位模式

在CSS中，position属性可以用于定义元素的定位模式，基本语法如下：

选择器 {		position:  属性值;  }

Position属性的常用值：

| **属性值** | **描述**                                           |
| ---------- | -------------------------------------------------- |
| static     | 自动定位/静态定位（默认定位方式）；                |
| relative   | 相对定位，相对于其原文档流的位置进行定位；         |
| absolute   | 绝对定位，相对于其上一个已经定位的父元素进行定位； |
| fixed      | 固定定位，相对于浏览器窗口进行定位；               |

#### （1）静态定位（static）

静态定位是所有元素的默认定位方式，当position属性的取值为static时，可以将元素定位于静态位置，所谓静态位置就是各个元素在HTML文档流中默认的位置；（即，网页中所有元素都默认为静态定位，这就是标准流的特性）；

在静态定位的状态下，无法通过边偏移属性（top、bottom、left、right）来改变元素的位置；静态定位的作用：一般他用来给有定位的盒子清除定位，不想加定位的盒子就可以添加这句；

#### （2）相对定位（relative）

相对定位是将元素相对于其标准流的位置进行定位，当position属性取值relative时，可以将元素定位于相对位置；

对元素设置相对定位后，可以通过边偏移属性改变元素的位置，但是它在文档流中的位置仍然保留。

``` css
position: relative; /*相对定位*/
top: 50px; /*边偏移*/
left: 70px;
```

注意：

1. 相对定位最重要的一点是，他可以通过边偏移来改变位置，但是它原来占有的位置会继续占有；
2. 其次，每次移动位置是以自己左上角为基点移动（相对于自己移动）；

就是说，相对定位的盒子仍在标准流中，他后面的盒子仍以标准流方式对待他（即，相对定位不脱标）；

#### （3）绝对定位（absolute）

当position属性取值为absolute时，可以将元素的定位模式设置为绝对定位；

1. 当父级盒子无定位时：绝对定位的子集会以浏览器的左上角为基准调整边偏移量；同时，定位盒子（已经脱标）在父级中不再占有位置，与他同级的兄弟盒子可以占据他原先的位置；
2. 父级有定位（可以使用relative，也可以使用absolute) ，孩子会以父亲左上角为基准进行移动，而对于绝对定位的兄弟盒子来讲，当盒子绝对定位以后，就不会在父级中继续占有位置，同级盒子可以占据定位盒子的位置；

注意：

1. 绝对定位最重要的一点就是它可以通过边偏移来移动位置，，但是它完全脱标，完全不占有位置；
2. 如果文档是可滚动的，那么绝对定位元素会随着它滚动，因为元素最终会相对于正常流的某一部分定位；

##### 子绝父相（重点）

释义：子集是绝对定位的话，父级要用相对定位；这是我们在网页布局中最常用的；（父级不脱标，要在网页中占据位置，所以用relative，子集要脱标，方便移动到父级盒子中的任意位置，所以用absolute;）;

##### 实现水平/垂直居中

普通盒子想要居中，只需要margin:0 auto;命令即可，而auto的命令对于绝对定位的盒子无效（对相对定位的盒子是有效的）；

如果绝对定位的盒子想要实现水平或垂直居中，有如下算法：

（1）水平居中：

1. 先left：50%；即子盒子的左边界移动到父盒子一半的位置上去；
2. 然后使用margin-left：负值，向左移动自身宽度的一半；即可

``` css
position: absolute;
left: 50%;
margin-left: -50px;
```

（2）垂直居中：

1. 先top：50%；即子盒子的上边界移动到父盒子一半的位子上去；
2. 然后使用margin-top:负值，向上移动自身宽度的一半；即可

``` css
position: absolute;
top: 50%;
margin-top: -50px;
```

#### （4）固定定位（fixed）

固定定位是绝对定位的一种特殊形式，类似于正方形是一个特殊的矩形一样，它是以浏览器窗口作为参照物来定义网页元素。当position属性的取值为fixed时，即可将元素的定位模式设置为固定定位；

当元素设置为固定定位后，他将脱离标准流的控制，始终依据浏览器窗口来定义自己的显示位置，不管浏览器滚动条如何滚动，也不管网页大小如何变化，该元素始终显示在浏览器窗口的固定位置；

注意：

1. 固定定位的元素跟父级没有任何关系，只认浏览器；
2. 固定定位完全脱标，不占有位置，不随滚动条滚动；

#### （5）定位模式的转换

跟浮动一样，元素添加了绝对定位（absolute）和固定定位（fixed）之后，元素的模式也会发生转换，由块级元素（或者行内元素）转换成行内块元素。（未定义宽度的盒子，其宽度会由其中的内容撑起）；

注意：对于行内元素，通过固定定位、绝对定位或者浮动之后，不用再进行模式转换，可直接给定宽高

### （2）边偏移

可以通过同时设置left值和right值的方式，来确定元素的宽度。

| **偏移属性** | **描述**                                       |
| ------------ | ---------------------------------------------- |
| top          | 顶端偏移量，定义元素相对于其父元素上边线的距离 |
| bottom       | 低端偏移量，定义元素相对于其父元素下边线的距离 |
| left         | 左侧偏移量，定义元素相对于其父元素左边线的距离 |
| right        | 右侧偏移量，定义元素相对于其父元素右边线的距离 |

``` css
div {
  position: absolute;
  left: 10%;
  right: 10%;
  height: 60px;
  background: red;
}
//无论屏幕多宽，显示的div永远是左右边距10%之间的宽度。
```

### （3）叠放次序（z-index）

对于多元素同时设置定位时，定位元素之间可能发生重叠；（总是后一个盒子会压在前一个盒子上面）；在CSS中要想调整重叠定位元素的堆叠顺序，可以对定位元素运用z-index层叠等级属性， 

> 语法： z-index：n;

参数： 取值可以为正数、负数、0；

注意：

（1）z-index默认属性值为0，取值越大，定位元素在层叠元素中越居上；

（2）如果取值相同，则根据书写顺序，后来居上；

（3）后面数字一定不要加单位；

（4）只有相对定位、绝对定位和固定定位有此属性，其余标准流、浮动、静态定位都无此属性；

### （4）四种定位总结

| **定位模式**         | **是否脱标占有位置** | **是否能使用边偏移** | **移动位置基准**         |
| -------------------- | -------------------- | -------------------- | ------------------------ |
| 静态定位（static）   | 不脱标，占有位置     | 不可以               | 正常模式                 |
| 相对定位（relative） | 不脱标，占有位置     | 可以                 | 以自身位置为基准         |
| 绝对定位（absolute） | 脱标，不占有位置     | 可以                 | 相对于定位的父级移动位置 |
| 固定定位（fixed）    | 脱标，不占有位置     | 可以                 | 相对于浏览器移动位置；   |